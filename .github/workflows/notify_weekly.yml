name: 3. ğŸ“… Weekly Notification Cron

on:
  schedule:
    # HÉ™r Bazar ertÉ™si 09:00 UTC iÅŸÉ™ dÃ¼ÅŸÃ¼r
    - cron: '0 9 * * 1' 
  workflow_dispatch:

jobs:
  notify_weekly:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¦ Kodu Ã‡Ä±xart
        uses: actions/checkout@v4

      - name: ğŸ› ï¸ Node.js quraÅŸdÄ±r (v20)
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: â¬‡ï¸ AsÄ±lÄ±lÄ±qlarÄ± quraÅŸdÄ±r
        run: npm install
        
      - name: ğŸƒ HÉ™ftÉ™lik BildiriÅŸi iÅŸÉ™ sal
        run: npm run cron:weekly
        env:
          SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
          SUPABASE_ANON_KEY: ${{ secrets.SUPABASE_ANON_KEY }}
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
